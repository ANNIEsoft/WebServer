<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> <title>Monitoring</title>
<meta http-equiv="refresh" content="180"> <!-- Refresh every 3mins -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>

</head>

<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script defer src="https://code.getmdl.io/1.1.2/material.min.js"></script>
 <link rel="stylesheet" href="https://code.getmdl.io/1.1.2/material.indigo-deep_purple.min.css" />
<meta name="viewport" content="width=device-width, initial-scale=0.99">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
  <link rel="stylesheet" href="styles.css"> 
  <body>


<div style="width:2%; overflow: inline; float: left;"> &ensp;</div>
<p> <a href="./Checklist.html">Web version</a> </p>

<div style="width:2%; overflow: inline; float: left;"> &ensp;</div>
<p>Date/Time: <span id="datetime"></span></p>

<script>
var dt = new Date();
document.getElementById("datetime").innerHTML = dt.toLocaleString();
</script>

<p>  </p>

<div style="width:2%; overflow: inline; float: left;"> &ensp;</div>
<div id="NumServices"> </div>
<p> </p>

<img src="./monitoringplots/DAQInfo_current.png" width=35% height="15%">
<img src="./monitoringplots/DAQ_VMEServices_current_24h.png"  width="25%" height="15%">
<img src="./monitoringplots/DAQFileSize_lastDay.png"  width="37%" height="15%">
<p> </p>
<img src="./monitoringplots/DAQInfo_current_Diskspace.png" width=29% height="15%">
<img src="./monitoringplots/DAQMemory_lastDay.png"  width="33%" height="15%">
<img src="./monitoringplots/DAQCPU_lastDay.png"  width="33%" height="15%">
<p> </p>
<hr>
<img src="./monitoringplots/LAPPDSC_TempHumInfo_ID0_current.png" width=29% height="15%">
<img src="./monitoringplots/LAPPDSC_TimeEvolution_Humidity_lastDay.png"  width="33%" height="15%">
<img src="./monitoringplots/LAPPDSC_TimeEvolution_Temp_lastDay.png"  width="33%" height="15%">
<p> </p>
<img src="./monitoringplots/LAPPDSC_TimeEvolution_Light_lastDay.png" width=33% height="15%">
<img src="./monitoringplots/LAPPDSC_TimeEvolution_Thermistor_lastDay.png"  width="33%" height="15%">
<img src="./monitoringplots/LAPPDSC_TimeEvolution_SaltBridge_lastDay.png"  width="33%" height="15%">
<p> </p>
<img src="./monitoringplots/LAPPDData_PSECData_current.png" width=33% height="15%">
<img src="./monitoringplots/LAPPDData_TimeEvolution_PPSEvents_lastDay.png"  width="33%" height="15%">
<img src="./monitoringplots/LAPPDData_TimeEvolution_DataEvents_lastDay.png"  width="33%" height="15%">
<p> </p>
<hr>
<div style="width:3%; overflow: inline; float: left;"> &ensp;</div>
<div style="width:20%; overflow: inline; float: left;"> <b>0)</b> Does the LAPPD see the BNB beam? (elevated rate between 8 and 10 microseconds) </div>
<img src="./monitoringplots/LAPPD_Time_Alignment_Thousand_Files_Board1_current.png"  width="35%" height="15%">
<img src="./monitoringplots/LAPPD_Time_Alignment_Reference.png"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: inline; float: left;"> &ensp;</div>
<div style="width:20%; overflow: inline; float: left;"> <b>1)</b> Are MRD files periodically updating? </div>
<img src="./monitoringplots/MRD_FileHistory_current_2h.png"  width="35%" height="15%">
<img src="./monitoringplots/MRD_FileHistory_current_2h_Reference.png"  width="35%" height="15%">
<p> </p>
<div class="leftspace" style="width:3%; overflow: inline; float: left;"> &ensp;</div>
<div class="question" style="width:20%; overflow: inline; float: left;"> <b>2)</b> Are PMT files periodically updating? </div>
<img src="./monitoringplots/PMT_FileHistory_current_2h.png"  width="35%" height="15%">
<img src="./monitoringplots/PMT_FileHistory_current_2h_Reference.png"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: inline; float: left;"> &ensp;</div>
<div style="width:20%; overflow: inline; float: left;"> <b>3)</b> Are all 3 features (background/beam/cosmic) visible in MRD data? </div>
<img src="./monitoringplots/MRDTDCHist_ClusterBeam_last20Files.png"  width="35%" height="15%">
<img src="./monitoringplots/MRDTDCHist_Cluster_lastFile_Reference.png"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: inline; float: left;"> &ensp;</div>
<div style="width:20%; overflow: inline; float: left;"> <b>4)</b> Are the MRD trigger rates in the expected range? (Beam: current repetition rate, normal operations 4-5Hz, Cosmic: 0.5Hz) </div>
<img src="./monitoringplots/MRDTriggertypes_timeevolution_lastDay.png"  width="35%" height="15%">
<img src="./monitoringplots/MRDTriggertypes_timeevolution_lastDay_Reference.png"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>5)</b> Did all MRD TDC slots register hits in the last file? Check the plot for completely empty TDC slots. </div>
<img src="./monitoringplots/MRDHitmap_lastFile.png"  width="35%" height="15%">
<img src="./monitoringplots/MRDHitmap_lastFile_Reference.png"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>6)</b> Do all active MRD channels have a rate larger than 0? TDC channels with a rate of 0 will appear as white boxes in the plot. (Blue: low/normal rate, yellow: slightly higher rate) </div>
<img src="./monitoringplots/MRDRates_Electronics_lastFile.png"  width="35%" height="15%">
<img src="./monitoringplots/MRDRates_Electronics_lastFile_Reference.png"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>7)</b> Are the Pedestal values in the expected range of 300-350?</div>
<img src="./monitoringplots/PMT_Ped_Electronics_lastFile.jpg"  width="35%" height="15%">
<img src="./monitoringplots/PMT_Ped_Electronics_lastFile_Reference.jpg"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>8)</b> Do all active PMTs have a rate larger than 0? PMTs with a rate of 0 will appear as white boxes in the plot. (Blue: low/normal rate, yellow: higher rate) </div>
<img src="./monitoringplots/PMT_Rate_Electronics_lastFile.jpg"  width="35%" height="15%">
<img src="./monitoringplots/PMT_Rate_Electronics_lastFile_Reference.jpg"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>9)</b> Did all VME ADC slots register hits in the last file? Check the plot for completely empty ADC slots. </div>
<img src="./monitoringplots/PMTHitmap_lastFile.png"  width="35%" height="15%">
<img src="./monitoringplots/PMTHitmap_lastFile_Reference.png"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>10)</b> Are the trigger rates roughly in the right order of magnitude? The 1D rate should correspond to the current beam repetition rate and the MRD Cosmic rate should be larger than 0. </div>
<img src="./monitoringplots/Trigger_Rate_selected_lastFile.png"  width="35%" height="15%">
<img src="./monitoringplots/Trigger_Rate_selected_lastFile_Reference.png"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>11)</b> Does the BRF (Booster RF) buffer look like the reference?</div>
<img src="./monitoringplots/PMT_Temp_BRF.jpg"  width="35%" height="15%">
<img src="./monitoringplots/PMT_Temp_BRF_Reference.jpg"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>12)</b> Does the RWM (Resistive Wall Monitor) buffer look like the reference?</div>
<img src="./monitoringplots/PMT_Temp_RWM.jpg"  width="35%" height="15%">
<img src="./monitoringplots/PMT_Temp_RWM_Reference.jpg"  width="35%" height="15%">
<p> </p>
<div style="width:3%; overflow: hidden; float: left;"> &ensp;</div>
<div style="width:20%; overflow: hidden; float: left;"> <b>13)</b> Is the MRD No Loopback rate zero? [or close to zero, values below 0.1Hz are acceptable]?</div>
<img src="./monitoringplots/MRDTrigger_noloopback_lastDay.png"  width="35%" height="15%">
<img src="./monitoringplots/MRDTrigger_noloopback_lastDay_Reference.png"  width="35%" height="15%">

<script>
 function getNumServices() {
   var myHeaders = new Headers();
   myHeaders.append('pragma', 'no-cache');
   myHeaders.append('cache-control', 'no-cache');

   var num_date;
   var date_file;
   fetch('./monitoringplots/date_num_services.txt')
     .then(response => response.text())
     .then ((data) => {
       num_date = parseInt(data);
   });

   var myInit = {
     method: 'GET',
     headers: myHeaders,
   };
   fetch('./monitoringplots/num_services.txt',myInit)
     .then(response => response.text())
     .then ((data) => {
       var num = parseInt(data);
       var num_services_text = num;
       if (num >= 22) num_services_text = "<p style=\"color:green; font-size: 30px;\" > DAQ Services: "+num+"/22 (All good) [Last updated: "+ new Date(num_date*1000).toLocaleString()+ " ] </p>";
       else num_services_text = "<p  style=\"color:red; font-size: 30px;\"> DAQ Services: "+num+"/22 (Something wrong) [Last updated: "+ new Date(num_date*1000).toLocaleString()+ " ] </p>";

       document.getElementById("NumServices").innerHTML = num_services_text;

     });
 }
 setInterval(getNumServices, 20000); //run function getNumServices() every 20 seconds (/every minute)
 </script>


</body>
                                                                                                                             
